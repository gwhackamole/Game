<!DOCTYPE HTML>
<html>
<head>
  <title>gwhackamole!</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: #000000;
    }
  </style>
  <script src="vendor/pixi.dev.js"></script>
  
  <script src="js/Board.js"></script>
  <script src="js/Button.js"></script>
  <script src="js/Mole.js"></script>
  <script src="js/Hammer.js"></script>
  <script src="js/ScoreBoard.js"></script>
  <script src="js/gameOver/stage.js"></script>
</head>
<body>
  <script>
  
  // create an new instance of a pixi stage
  var previousTime = 0;
  var interactive = true
  var stage = new PIXI.Stage(0x000000, interactive);
  var gameOver = createGameOver();
  
  // create a renderer instance
  var renderer = PIXI.autoDetectRenderer(800, 1280);
  
  // add the renderer view element to the DOM
  document.body.appendChild(renderer.view);
  
  var board = new Board(stage)

  requestAnimFrame(animate);

  function animate(time) {
    var timeInSeconds = time * 0.001
    var dt = timeInSeconds - previousTime
    previousTime = timeInSeconds
    
    // clamp delta time to 1s, to avoid big frame jumps
    if (dt > 1)
      dt = 1
    
    var isGameEnd = board.update(timeInSeconds, dt);

    // render the stage   
    renderer.render( isGameEnd ? gameOver : stage );

    requestAnimFrame( animate );
  }

  /**
   * Takes an object with x, y as parameter
   * And returns another object with x, y transformed
   */
  function doTransform(position) {
    var originalPositions = {
      x: 0,
      y: 475,
      width: 800,
      height: 500
    };
    return {
      x: position.x * originalPositions.width + originalPositions.x,
      y: position.y * originalPositions.height + originalPositions.y,
    };
  }
  </script>

  </body>
</html>
